<!DOCTYPE html>
<html>
    <head>
        <title>Canvas Fun</title>
        <style type="text/css">
            body {
                margin: 0;
                overflow: hidden;
            }
        </style>
    </head>
    <body>
        <canvas id="canvas"></canvas>
        <script type="text/javascript">

            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');

            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            ctx.strokeStyle = '#BADA55';
            ctx.lineCap = 'round';
            ctx.lineCap = 'round';

            ctx.lineWidth = 10;

            let isRunning = false;
            let hue = 0;
            let [x, y] = [0, 0];
            function draw(e) {

                //Stop the function when it is not applicable
                if(!isRunning) return;

                ctx.strokeStyle = `hsl(${hue ++}, 100%, 50%)`;

                ctx.beginPath();
                ctx.moveTo(x, y);   
                ctx.lineTo(e.offsetX, e.offsetY);

                ctx.lineWidth = ctx.lineWidth <= 100 ? ctx.lineWidth + 1 : 10;

                ctx.stroke();
                [x, y] = [e.offsetX, e.offsetY];

            }

            document.addEventListener('mousemove', draw);

            document.addEventListener('mouseup', () => isRunning = false);
            document.addEventListener('mousedown', (e) => {
                isRunning = true;
                [x, y] = [e.offsetX, e.offsetY];
            });

            document.addEventListener('mouseout', () => isRunning = false)

        </script>
    </body>
</html>